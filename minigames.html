<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maniek - Minigry</title>
    <link rel="stylesheet" href="./css/all.css">
    <link rel="stylesheet" href="./css/games/minigames.css">

    <script src="./js/cookies.js"></script>
</head>
<body>

    <main>

        <div class="enter-fullscreen">
            <div class="background"></div>
            <button>
                <span class="big blue"> Włącz pełny ekran </span> <br>
                <br> > aby poprawnie korzystać z gry <
                <br> <span class="blue">(wciśnij ten przycisk)</span>
            </button>
        </div>

        <div class="game-navigation">
            <div class="button selected" data-game="logoitarcza" data-name="Logo i Tarcza">
                <img src="assets/logoitarcza.png" alt="Logo i Tarcza">
            </div>
    
            <div class="button" data-game="flappymaniek" data-name="Flappy Maniek">
                <img src="assets/flappymaniek.png" alt="Flappy Maniek">
                <!-- <p class="workinprogress">WIP</p> -->
            </div>

            <div class="button" data-game="wisielec" data-name="Wisielec">
                <img src="assets/wisielec.png" alt="Wisielec">
                <!-- <p class="workinprogress">WIP</p> -->
            </div>
        </div>

        <!-- Lewa strona (brazowa, gierki) -->
        <div class="games-side logoitarcza">
            <!-- =========== -->
            <!-- TIC TAC TOE -->

            <section class="logoitarcza">
                

                <!-- Main tic tac toe board -->
                <div class="game-container" id="game-board">
                    <h1 class="game-name">
                        <span class="blue">Logo</span> i <span class="brown">Tarcza</span>
                    </h1>

                    <!-- Win popup -->
                    <div class="win-popup" id="winPopup">
                        <p class="popupText" id="popupText"></p>

                        <div class="popup-btns">
                            <button id="resetBtn"><img src="./assets/retry.png"></button>
                        </div>
                    </div>

                    <!-- The board -->
                    <div class="tiles">

                    </div>

                </div>

                <!-- Icons at the bottom/top -->
                <div class="legend">
                    <div class="player">
                        <img src="./assets/krzyzyk.png" alt="X">
                        <span class="blue">Gracz</span>
                    </div>
                    <div class="opponent">
                        <img src="./assets/kolko.png" alt="O">
                        <span class="brown">Maniek</span>
                    </div>
                </div>
            </section>

            <!-- ============= -->
            <!-- FLAPPY MANIEK -->

            <section class="flappymaniek hidden">
                <div class="screen">
                    <p class="titlescreen">Flappy Maniek</p>

                    <p class="highscore playing">0</p>
                    <p class="gameover hidden">GAME OVER</p>

                    <div class="pipes"></div>
                </div>

                <div class="nothing"></div>
            </section>

            <div class="score player logoitarcza">
                <img src="./assets/krzyzyk.png">
                <span class="wins">0 wygranych</span>
                <img src="./assets/krzyzyk.png">
            </div>
        </div>
    
        <!-- Prawa strona (niebieska, maniek) -->
        <div class="maniek-side">
            
            <div class="flappymaniek highscores hidden">
                <p>Najlepsze wyniki</p>
                <div id="highscoresList">

                </div>
            </div>

            <img class="maniek logoitarcza" src="./assets/maniek-faces/thinking.gif">
    
            <div class="score maniek logoitarcza">
                <img src="./assets/kolko.png">
                <span class="wins">0 wygranych</span>
                <img src="./assets/kolko.png">
            </div>
        </div>
    </main>
    




    

    <!-- Navigation button container / zakładki -->
    <div class="navigation-container">
        <div class="button" data-tab="index.html" data-name="Mapa">
            <!-- Mapa -->
            <img src="./assets/locationPin.png" alt="Mapa">
        </div> 

        <div class="button" data-tab="info.html" data-name="Info">
            <!-- Info i historia szkoły -->
            <img src="./assets/info.png" alt="Info">
        </div>

        <div class="button selected" data-tab="minigames.html" data-name="Minigry">
            <!-- Minigierki -->
            <img src="./assets/minigames.png" alt="Minigry">
        </div>

        <div class="button" data-tab="wheel.php" data-name="Koło fortuny">
            <!-- Koło fortuny -->
            <img src="./assets/wheel.png" alt="Koło fortuny">
            <img src="./assets/sparkle.png" alt="" class="decoration">
        </div>
    </div>

    <!-- Game scripts -->
    <script src="js/games/game-navigation.js"></script>

    <script src="js/navigation.js"></script>
    <script src="js/enter-fullscreen.js"></script>

    <script src="js/include-confetti.js"></script>
    <script src="js/screensaver.js"></script>

    <script>
        const gameStyles = {
            logoitarcza: './css/games/logoitarcza.css',
            flappymaniek: './css/games/flappymaniek.css',
            wisielec: './css/games/wisielec.css'
        };

        const gameScripts = {
            logoitarcza: 'js/games/logoitarcza.js',
            flappymaniek: 'js/games/flappymaniek.js',
            wisielec: 'js/games/wisielec.js'
        };

        let gamesDone = {};

        function loadGameResources(game) {
            if (gamesDone[game]) return;

            // Load CSS
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = gameStyles[game];
            document.head.appendChild(link);

            // Load JS
            const script = document.createElement('script');
            script.src = gameScripts[game];
            document.body.appendChild(script);

            gamesDone[game] = true;
        }

        document.querySelectorAll('.game-navigation .button').forEach(button => {
            const game = button.getAttribute('data-game');
            button.addEventListener('click', () => {
                loadGameResources(game);
            });
        });

        // Load resources for the initially selected game
        const initialGame = document.querySelector('.game-navigation .button.selected').getAttribute('data-game');
        loadGameResources(initialGame);
    </script>
</body>
</html>